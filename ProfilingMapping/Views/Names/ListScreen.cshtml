@model ProfilingMapping.Models.LogiInModel
@{
    ViewBag.Title = "ListScreen";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
@{
    Model.cntMinor = 0;
    Model.cntYoungAdults = 0;
    Model.cntMiddleAge = 0;
    Model.cntSenior = 0;
    Model.cntMale = 0;
    Model.cntFemale = 0;
}
@foreach (ProfilingMapping.Models.TBL_NAMES names in Model.ListOfNames)
{
    if (((Model.Minor == true && names.AGE < 18) || (Model.YoungAdults == true && names.AGE >= 18 && names.AGE <= 39) || (Model.MiddleAge == true && names.AGE >= 40 && names.AGE <= 59) || (Model.Senior == true && names.AGE >= 61)) && (Model.GenderFilter == names.GENDER || Model.GenderFilter == "MALE & FEMALE"))
    {
        if (Model.Minor == true && names.AGE < 18)
        {
            Model.cntMinor++;
        }
        if (Model.YoungAdults == true && names.AGE >= 18 && names.AGE <= 39)
        {
            Model.cntYoungAdults++;
        }
        if (Model.MiddleAge == true && names.AGE >= 40 && names.AGE <= 59)
        {
            Model.cntMiddleAge++;
        }
        if (Model.Senior == true && names.AGE >= 61)
        {
            Model.cntSenior++;
        }
        if (names.GENDER == "MALE")
        {
            Model.cntMale++;
        }
        if (names.GENDER == "FEMALE")
        {
            Model.cntFemale++;
        }
    }
}
<legend>Profiles</legend>
<div class="row">
    <div class="col-5">

        <div class="card" style="">
            <div class="card-header">Filter</div>
            <div class="card-body">
                @using (Html.BeginForm("NamesFilter", "Names", FormMethod.Post, new { @name = "NamesFilterForm" }))
                {
                    <fieldset>
                        <div class="form-group row margin_bottom_10">
                            <label for="Name" class="col-sm-4 col-form-label">Minor</label>
                            <div class="col-sm-8">
                                @* class should be form-control-plaintext when viewing *@
                                @*@Html.TextBoxFor(model => model.SelectedNames.FIRSTNAME, new { @class = "form-control", @id = "FIRSTNAME" })*@
                                @Html.CheckBoxFor(model => model.Minor, new { @class = "form-check-input", @id = "Minor", @type = "checkbox", @onchange = "this.form.submit();" })
                                below 18
                            </div>
                        </div>
                        <div class="form-group row margin_bottom_10">
                            <label for="Name" class="col-sm-4 col-form-label">Young Adults</label>
                            <div class="col-sm-8">
                                @* class should be form-control-plaintext when viewing *@
                                @*@Html.TextBoxFor(model => model.SelectedNames.FIRSTNAME, new { @class = "form-control", @id = "FIRSTNAME" })*@
                                @Html.CheckBoxFor(model => model.YoungAdults, new { @class = "form-check-input", @id = "YoungAdults", @type = "checkbox", @onchange = "this.form.submit();" })
                                18 - 39
                            </div>
                        </div>
                        <div class="form-group row margin_bottom_10">
                            <label for="Name" class="col-sm-4 col-form-label">Middle Age</label>
                            <div class="col-sm-8">
                                @* class should be form-control-plaintext when viewing *@
                                @*@Html.TextBoxFor(model => model.SelectedNames.FIRSTNAME, new { @class = "form-control", @id = "FIRSTNAME" })*@
                                @Html.CheckBoxFor(model => model.MiddleAge, new { @class = "form-check-input", @id = "MiddleAge", @type = "checkbox", @onchange = "this.form.submit();" })
                                40 - 59
                            </div>
                        </div>
                        <div class="form-group row margin_bottom_10">
                            <label for="Name" class="col-sm-4 col-form-label">Senior</label>
                            <div class="col-sm-8">
                                @* class should be form-control-plaintext when viewing *@
                                @*@Html.TextBoxFor(model => model.SelectedNames.FIRSTNAME, new { @class = "form-control", @id = "FIRSTNAME" })*@
                                @Html.CheckBoxFor(model => model.Senior, new { @class = "form-check-input", @id = "Senior", @type = "checkbox", @onchange = "this.form.submit();" })
                                60 and above
                            </div>
                        </div>
                        <div class="form-group row margin_bottom_10">
                            <label for="Name" class="col-sm-4 col-form-label">Gender</label>
                            <div class="col-sm-8">
                                @{
                                    var GenderList = new List<SelectListItem>();
                                    GenderList.Add(new SelectListItem { Text = "MALE & FEMALE", Value = "MALE & FEMALE" });
                                    GenderList.Add(new SelectListItem { Text = "MALE", Value = "MALE" });
                                    GenderList.Add(new SelectListItem { Text = "FEMALE", Value = "FEMALE" });
                                }
                                @* class should be form-control-plaintext when viewing *@
                                @Html.DropDownListFor(model => model.GenderFilter, GenderList, new { @class = "form-select", @id = "GENDER", @onchange = "this.form.submit();" })
                            </div>
                        </div>
                        <br />
                        <br />
                    </fieldset>
                }
            </div>
        </div>
    </div>
    <div class="col-5">
        <div class="card" style="">
            <div class="card-header">Count</div>
            <div class="card-body">
                <form>
                    <fieldset>
                        <div class="form-group row margin_bottom_10">
                            <label for="Name" class="col-sm-4 col-form-label">Minor</label>
                            <div class="col-sm-8">
                                @Model.cntMinor
                            </div>
                        </div>
                        <div class="form-group row margin_bottom_10">
                            <label for="Name" class="col-sm-4 col-form-label">Young Adults</label>
                            <div class="col-sm-8">
                                @Model.cntYoungAdults
                            </div>
                        </div>
                        <div class="form-group row margin_bottom_10">
                            <label for="Name" class="col-sm-4 col-form-label">Middle Age</label>
                            <div class="col-sm-8">
                                @Model.cntMiddleAge
                            </div>
                        </div>
                        <div class="form-group row margin_bottom_10">
                            <label for="Name" class="col-sm-4 col-form-label">Senior</label>
                            <div class="col-sm-8">
                                @Model.cntSenior
                            </div>
                        </div>
                        <div class="form-group row margin_bottom_10">
                            <label for="Name" class="col-sm-4 col-form-label">Male</label>
                            <div class="col-sm-8">
                                @Model.cntMale
                            </div>
                        </div>
                        <div class="form-group row margin_bottom_10">
                            <label for="Name" class="col-sm-4 col-form-label">Female</label>
                            <div class="col-sm-8">
                                @Model.cntFemale
                            </div>
                        </div>
                    </fieldset>
                </form>
            </div>
        </div>
    </div>
</div>
<br />
@using (Html.BeginForm("Delete", "Names", FormMethod.Post, new { @name = "NamesForm" }))
{

    <table id="table_names" class="table table-striped" style="width:100%">
        <thead>
            <tr>
                <th style="width: 25px;">
                    @*<input type="checkbox" id="AreChecked" />*@
                </th>
                <th>Full Name</th>
                <th>Age</th>
                <th>Gender</th>
                <th>Physical Address</th>
                <th class="hidden">ID</th>
            </tr>
        </thead>
        <tbody>
            @foreach (ProfilingMapping.Models.TBL_NAMES names in Model.ListOfNames)
            {
                if (((Model.Minor == true && names.AGE < 18) || (Model.YoungAdults == true && names.AGE >= 18 && names.AGE <= 39) || (Model.MiddleAge == true && names.AGE >= 40 && names.AGE <= 59) || (Model.Senior == true && names.AGE >= 61)) && (Model.GenderFilter == names.GENDER || Model.GenderFilter == "MALE & FEMALE"))
                {
                    <tr>
                        <td><input type="checkbox" name="AreChecked" value="@names.NAMEID" /></td>
                        <td><a href="@Url.Action("EditScreen","Names", new { NameID = (names.NAMEID)})">@names.FIRSTNAME @names.LASTNAME</a></td>
                        <td>@names.AGE</td>
                        <td>@names.GENDER</td>
                        <td>@names.STREET @names.SUBDIVISION @names.TBL_BARANGAY.NAME @names.CITY @names.PROVINCE</td>
                        <td class="hidden">@names.NAMEID</td>
                    </tr>
                }
            }
        </tbody>
    </table>

    <p class="bs-component">
        <a class="btn btn-primary" href="@Url.Action("EditScreen","Names")"><i class="icon-plus"></i>  Add</a>
        <button type="submit" class="btn btn-danger"><i class="icon-trash"></i>  Delete</button>
    </p>
}
<br />

<script>
    $(document).ready(function () {
        $('#table_names').DataTable({
            "columnDefs": [
                { "orderable": false, "targets": 0 }
            ],
            order: [[1, 'asc']],
            "pagingType": $(".container-fluid").width() <= 480 ? "simple" : "simple_numbers"
        });
    });
</script>

